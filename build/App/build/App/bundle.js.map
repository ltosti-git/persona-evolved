{"version":3,"sources":["app.js","azienda/azienda.module.js","azienda/azienda.route.js","azienda/azienda.controller.js","azienda/azienda.service.js","azienda/select.controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpFA;AACA","file":"../../bundle.js","sourcesContent":["(function(){\r\n  'use strict';\r\n\r\n  var App = angular.module('App',[\r\n    'ngRoute',\r\n    'ngResource',\r\n    'ngMaterial',\r\n    'App.azienda'\r\n\r\n  ]);\r\n\r\n\r\n\r\n })();\r\n","(function(){\r\n  'use strict';\r\n\r\n  angular.module('App.azienda', []);\r\n\r\n})();\r\n","(function(){\r\n  'use strict';\r\n  angular.module('App.azienda')\r\n    .config(config);\r\n\r\n    function config($routeProvider){ console.log('Route');\r\n      $routeProvider\r\n        .when('/', {\r\n          templateUrl:'/App/view/azienda/template/azienda.template.html',\r\n          controller:'aziendaController',\r\n          controllerAs: 'vm'\r\n        });\r\n    }\r\n})();\r\n","(function(){\r\n  'use strict';\r\n\r\n  angular.module('App.azienda')\r\n    .controller('aziendaController', aziendaController);\r\n\r\n    aziendaController.$inject = ['AziendaService', '$location'];\r\n\r\n    function aziendaController(AziendaService, $location){ console.log('Controller');\r\n      var vm = this;\r\n      vm.newAzienda = {};\r\n\r\n      vm.reparti = [\r\n      'modelleria',\r\n      'taglio',\r\n      'tranceria',\r\n      'giunteria',\r\n      'montaggio',\r\n      'fondo',\r\n      'finissaggio',\r\n      'guarnitura',\r\n      'magazzino',\r\n      'manutenzione'\r\n    ];\r\n\r\n    vm.selection = [];\r\n\r\n    vm.toggleSelection = function toggleSelection(reparto) {console.log(reparto);\r\n      var idx = vm.reparti.indexOf(reparto);console.log(idx);\r\n      if (idx > -1) {\r\n        vm.selection.push(reparto);console.log(vm.selection);\r\n      }\r\n      else {\r\n        vm.selection.splice(idx, 1);\r\n      }\r\n    };\r\n\r\n\r\n      vm.getMyAzienda = function(){\r\n        return AziendaService.getAzienda()\r\n        // then catch promise\r\n        .then(function(data){\r\n          vm.azienda = data; //console.log(vm.azienda['']);\r\n          return\r\n        }).catch(function(err){\r\n          return err;\r\n        });\r\n      };\r\n\r\n      vm.getMyDipendenti = function(){\r\n        return AziendaService.getDipendenti()\r\n        .then(function(data){ //console.log(data);\r\n          vm.dipendenti = data;\r\n          return\r\n        }).catch(function(err){\r\n          return err;\r\n        });\r\n      };\r\n\r\n      vm.detailsAzienda = function(azienda) {\r\n        //vm.newAzienda = angular.copy(azienda);\r\n        vm.newAzienda.id = azienda._id;\r\n        vm.newAzienda.nome = azienda.nome;\r\n        vm.newAzienda.tipo = azienda.tipo;\r\n        vm.newAzienda.dipendenti = azienda.dipendenti;\r\n        vm.newAzienda.fatturato = azienda.fatturato;\r\n        vm.newAzienda.commesse = azienda.commesse;\r\n        vm.newAzienda.commesseTot = azienda.commesseTot;\r\n        vm.newAzienda.reparti = azienda.selection;\r\n        //$location.path('/azienda/details/' + vm.newAzienda.id);\r\n      }\r\n\r\n\r\n\r\n      vm.saveMyAzienda = function() { console.log(vm.newAzienda.id);\r\n\r\n        if(!vm.newAzienda.id) { console.log('save');\r\n        return AziendaService.saveAzienda(vm.newAzienda)\r\n          .then(function(){\r\n            vm.getMyAzienda();\r\n            return vm.newAzienda = {};\r\n          }).catch(function(err){ console.log(err);\r\n            return err;\r\n          });\r\n        } else { console.log('edit');\r\n          return AziendaService.editAzienda(vm.newAzienda)\r\n          .then(function() {\r\n            vm.getMyAzienda();\r\n            return vm.newAzienda = {};\r\n          }).catch (function(err){\r\n            return err;\r\n          });\r\n\r\n        }\r\n      };\r\n\r\n      vm.deleteMyAzienda = function(id) { //console.log(id);\r\n        return AziendaService.deleteAzienda(id)\r\n          .then(function(){\r\n            vm.getMyAzienda();\r\n            return vm.newAzienda = {};\r\n          }).catch(function(err){\r\n            return err;\r\n          })\r\n      }\r\n    }\r\n})();\r\n","(function(){\r\n  'use strict';\r\n\r\n  angular.module('App.azienda')\r\n    .factory('AziendaService',AziendaService);\r\n\r\n    AziendaService.$inject = ['$resource'];\r\n\r\n    function AziendaService($resource){ console.log('Service');\r\n\r\n      var Azienda = $resource('/azienda/', {azienda:'@azienda'}, {'getAll':{method: 'GET', isArray: true}, 'save': {method: 'POST'}});\r\n      var delAzienda = $resource('/azienda/:id', {id:'@id'}, {'delete': {method: 'DELETE'}});\r\n      var edAzienda = $resource('/azienda/:id', {id:'@id'}, {'edit': {method: 'PUT'}, 'get': {method: 'GET'}});\r\n      var Dipendenti = $resource('/dipendenti/', null, {'getAll': {method: 'GET', isArray:true}});\r\n      return{\r\n        getAzienda: getAzienda,\r\n        saveAzienda: saveAzienda,\r\n        deleteAzienda: deleteAzienda,\r\n        editAzienda: editAzienda,\r\n        getMyAziendaDet: getMyAziendaDet,\r\n        getDipendenti: getDipendenti\r\n      };\r\n\r\n      function getAzienda(callback){\r\n        callback = callback || angular.noop;\r\n        return Azienda.getAll(function(azienda){\r\n          return callback(azienda);\r\n        }, function(err){\r\n          return callback(err);\r\n        }).$promise;\r\n      }\r\n\r\n      function getDipendenti(callback){\r\n        callback = callback || angular.noop;\r\n        return Dipendenti.getAll(function(dipendente){\r\n          return callback(dipendente);\r\n        }, function(err){\r\n          return callback(err);\r\n        }).$promise;\r\n      }\r\n\r\n      function saveAzienda(newAzienda, callback){   //rifarla con la promise\r\n        callback = callback || angular.noop;\r\n        //console.log(newAzienda);\r\n        return Azienda.save(newAzienda, function(data){\r\n          return callback(data);\r\n        }, function(err) {\r\n          return callback(err);\r\n        }).$promise;\r\n\r\n      }\r\n\r\n      function deleteAzienda(id, callback) { //console.log(id);\r\n        callback = callback || angular.noop;\r\n        return delAzienda.delete({'id':id}, function(){\r\n          return callback('del ok');\r\n        }, function(err){\r\n          return callback(err);\r\n        }).$promise;\r\n\r\n      }\r\n\r\n      function editAzienda(azienda, callback) { console.log(azienda);\r\n        callback = callback || angular.noop;\r\n        return edAzienda.edit(azienda, function(data){\r\n          return callback(data);\r\n        }, function(err) {\r\n          return callback(err);\r\n        }).$promise;\r\n      }\r\n\r\n      function getMyAziendaDet(id, callback) { //console.log(id);\r\n        callback = callback || angular.noop;\r\n        return edWeapons.get({'id': id}, function(data){\r\n          return callback(data);\r\n        }, function(err) {\r\n          return callback(err);\r\n        }).$promise;\r\n      }\r\n\r\n\r\n    }\r\n\r\n})();\r\n","\r\n"]}